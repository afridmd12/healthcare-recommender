<!DOCTYPE html>
<html>
<head>
    <title>Healthcare Prediction</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script>
        function fillTestCase() {
            const cases = {
                "Very Healthy": [5, 12, 600, 220],
                "Active Donor": [12, 14, 550, 200],
                "Balanced Case": [25, 6, 300, 120],
                "Mid Risk": [35, 4, 150, 90],
                "High Recency Only": [80, 8, 400, 200],
                "Low Frequency": [20, 1, 350, 180],
                "Low Monetary & Time": [15, 5, 50, 25],
                "High Risk Case 1": [85, 1, 40, 15],
                "High Risk Case 2": [90, 1, 20, 10],
                "Extreme Risk": [95, 0, 10, 5]
            };
            const selected = document.getElementById("testCaseSelector").value;
            if (cases[selected]) {
                document.getElementsByName("recency")[0].value = cases[selected][0];
                document.getElementsByName("frequency")[0].value = cases[selected][1];
                document.getElementsByName("monetary")[0].value = cases[selected][2];
                document.getElementsByName("time")[0].value = cases[selected][3];
            }
        }
    </script>
</head>
<body class="bg-light">
    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card shadow-lg">
                    <div class="card-header bg-primary text-white text-center">
                        <h3>Healthcare Prediction App</h3>
                    </div>
                    <div class="card-body">
                        <form method="post">
                            <div class="mb-3">
                                <label class="form-label">Choose a Test Case (optional):</label>
                                <select id="testCaseSelector" class="form-select mb-3" onchange="fillTestCase()">
                                    <option value="">-- Select a Test Case --</option>
                                    <option>Very Healthy</option>
                                    <option>Active Donor</option>
                                    <option>Balanced Case</option>
                                    <option>Mid Risk</option>
                                    <option>High Recency Only</option>
                                    <option>Low Frequency</option>
                                    <option>Low Monetary & Time</option>
                                    <option>High Risk Case 1</option>
                                    <option>High Risk Case 2</option>
                                    <option>Extreme Risk</option>
                                </select>
                            </div>

                            <div class="mb-3">
                                <label class="form-label">Recency:</label>
                                <input type="number" name="recency" step="any" class="form-control" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Frequency:</label>
                                <input type="number" name="frequency" step="any" class="form-control" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Monetary:</label>
                                <input type="number" name="monetary" step="any" class="form-control" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Time:</label>
                                <input type="number" name="time" step="any" class="form-control" required>
                            </div>
                            <div class="text-center">
                                <button type="submit" class="btn btn-success">Predict</button>
                                <a href="/run-tests" class="btn btn-secondary ms-2">Run Full Test Suite</a>
                            </div>
                        </form>

                        {% if prediction %}
                        <div class="alert alert-info text-center mt-4">
                            <strong>Recommendation:</strong><br>
                            {{ prediction }}
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
